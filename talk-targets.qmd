---
title: "Automatic Pipelines with {targets}"
author: "Anders Askeland"
format: 
  revealjs:
    mermaid:
      theme: forest
---


## What is a data analysis "pipeline"?

::: columns
::: {.column width="60%"}
![](images/factory.png)
:::




::: {.column width="30%"}
```{mermaid engine='DiagrammeR::mermaid'}
graph TB
  clean_data[Clean data&nbsp]
  subgraph Data
  raw_data[Raw data&nbsp] -- Function&nbsp --> clean_data
  end
  subgraph Analysis
  clean_data -- Function&nbsp --> output_1[Table]
  clean_data -- Function&nbsp --> output_2[Figure]

  end
  subgraph Presentation
  output_1 --> presentation[Paper]
  output_2 --> presentation[Paper]
  end
  
```
:::
:::

::: notes
-   Short introduction - A practical example
-   Concept
-   Formal vs non-formal
  - Non-formal. You manually decide what to re-run
-   Reproducibility
:::

## What is {targets}?
::: columns
::: {.column width="60%" .incremental}
-   R package
-   Pipeline tool
-   Ecosystem (targetopia)
:::

::: {.column width="30%"}
![](images/targets_logo.svg)

:::
:::



::: notes
-  Formal pipeline tool
-  What does this mean?
   - Dependency management
   - Caching
   - Visualization of workflows
- Reproducible, readable, and code-based data analysi
:::

## Why {targets}?
::: columns
::: {.column width="60%" .incremental}
-   First R based pipeline implementation
-   Demanding computation
-   Reproducibility
-   Parallel Computing
-   And more...
:::

::: {.column width="30%"}
![](images/question.png)

:::
:::



::: notes
-  Formal pipeline tool
-  What does this mean?
   - Dependency management
   - Caching
   - Visualization of workflows
-  Not only because its cool
-  
   
:::

## How to use {targets}?
::: {.incremental}

-   Setup targets (`_targets` file)

  ```{.r .incremental}
  targets::use_targets()
  ```
-   Run pipeline
  ```{.r}
  targets::tar_make()
  ```
-   Visualize pipeline
  ```{.r}
  targets::tar_visualnetwork()
  ```
:::

::: notes
-  Formal pipeline tool
-  What does this mean?
   - Dependency management
   - Caching
   - Visualization of workflows
   
:::


## Let's do some coding...

::: columns
::: {.column width="40%"}
Plot
```{r}
targets::tar_read(plot) 
```


:::
::: {.column width="60%"}


Analysis

```{r}
targets::tar_read(analysis) |> 
knitr::kable()
```


:::
:::


::: notes
-  Setup targets & explain file
  - A lot of setup
  - Targets pipeline inside list 
-  What should we do
  - Create this presentation into a pipeline
-  Data
   - Show pipeline files
-  Analysis
   - 
-  
:::

